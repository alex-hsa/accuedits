services:
  access_check.entity.preview:
    class: Drupal\preview\Access\EntityPreviewAccessCheck
    arguments: ['@entity_type.manager']
    tags:
      - { name: access_check, applies_to: _entity_preview_access }

  preview.form_service:
    class: Drupal\preview\PreviewFormService
    arguments: ['@config.factory', '@access_check.entity.preview', '@current_user', '@request_stack', '@tempstore.private']

  entity_preview:
    class: Drupal\preview\ParamConverter\PreviewConverter
    arguments: ['@tempstore.private']
    tags:
      - { name: paramconverter }
    lazy: true
